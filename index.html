<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cricket Scorer ‚Äì Full Batting History</title>

<style>
body{
    background:#0e3d1a;
    color:white;
    font-family:Arial;
    text-align:center;
}
.box{
    background:black;
    max-width:450px;
    margin:auto;
    padding:15px;
    border:3px solid gold;
    border-radius:10px;
}
.score{
    font-size:48px;
    color:gold;
    font-weight:bold;
}
button{
    padding:10px;
    margin:4px;
    font-size:15px;
    font-weight:bold;
}
.run{background:#eee;}
.wide{background:orange;}
.wicket{background:red;color:white;}
.undo{background:gray;color:white;}

.section{
    background:#111;
    padding:8px;
    margin-top:8px;
    text-align:left;
    font-size:14px;
}
.strike{color:gold;font-weight:bold;}
.out{color:red;}
</style>
</head>

<body>

<div class="box">
<h3 id="team"></h3>

<div class="score">
<span id="runs">0</span>/<span id="wickets">0</span>
</div>

<div>
Overs: <span id="overs">0.0</span> |
Balls: <span id="balls">0</span>/36
</div>

<div class="section">
<b>Current Batsmen</b>
<div id="current"></div>
</div>

<div>
<button class="run" onclick="play(0)">0</button>
<button class="run" onclick="play(1)">1</button>
<button class="run" onclick="play(2)">2</button>
<button class="run" onclick="play(3)">3</button>
<button class="run" onclick="play(4)">4</button>
<button class="run" onclick="play(6)">6</button><br>
<button class="wide" onclick="extra()">WD / NB</button>
<button class="wicket" onclick="wicket()">WICKET</button>
<button class="undo" onclick="undo()">UNDO</button>
</div>

<div class="section">
<b>Batting Scorecard</b>
<div id="scorecard"></div>
</div>

</div>

<script>
const teamEl=document.getElementById("team"),
runsEl=document.getElementById("runs"),
wicketsEl=document.getElementById("wickets"),
ballsEl=document.getElementById("balls"),
oversEl=document.getElementById("overs"),
currentEl=document.getElementById("current"),
scorecardEl=document.getElementById("scorecard");

let team=prompt("Team Name")||"Team A";
teamEl.innerText=team;

let batsmen=[];
let striker=0, nonStriker=1;
let runs=0,wickets=0,balls=0;
let undoStack=[];

function newBatsman(){
    return {
        name:prompt("Batsman Name")||"Player",
        runs:0,
        balls:0,
        out:false
    };
}

batsmen.push(newBatsman());
batsmen.push(newBatsman());

function save(){
    undoStack.push(JSON.stringify({runs,wickets,balls,batsmen,striker,nonStriker}));
}

function update(){
    runsEl.innerText=runs;
    wicketsEl.innerText=wickets;
    ballsEl.innerText=balls;
    oversEl.innerText=Math.floor(balls/6)+"."+(balls%6);

    currentEl.innerHTML=
    `<div class="strike">üèè ${batsmen[striker].name} - ${batsmen[striker].runs}(${batsmen[striker].balls})</div>
     <div>${batsmen[nonStriker].name} - ${batsmen[nonStriker].runs}(${batsmen[nonStriker].balls})</div>`;

    renderScorecard();
}

function play(r){
    save();
    runs+=r;
    balls++;
    batsmen[striker].runs+=r;
    batsmen[striker].balls++;
    if(r%2===1) changeStrike();
    endBall();
}

function extra(){
    save();
    runs++;
    update();
}

function wicket(){
    save();
    balls++;
    wickets++;
    batsmen[striker].balls++;
    batsmen[striker].out=true;

    batsmen.push(newBatsman());
    striker=batsmen.length-1;
    endBall();
}

function changeStrike(){
    [striker,nonStriker]=[nonStriker,striker];
}

function endBall(){
    if(balls%6===0) changeStrike();
    update();
}

function renderScorecard(){
    scorecardEl.innerHTML="";
    batsmen.forEach((b,i)=>{
        scorecardEl.innerHTML+=
        `<div class="${b.out?"out":""}">
        ${i+1}. ${b.name} ‚Äì ${b.runs} (${b.balls}) ${b.out?"OUT":"NOT OUT"}
        </div>`;
    });
}

function undo(){
    if(!undoStack.length) return;
    let s=JSON.parse(undoStack.pop());
    runs=s.runs; wickets=s.wickets; balls=s.balls;
    batsmen=s.batsmen; striker=s.striker; nonStriker=s.nonStriker;
    update();
}

update();
</script>

</body>
</html>
